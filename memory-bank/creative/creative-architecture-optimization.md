# üé® –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–ê–Ø –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø: CREATIVE PHASE
# mcp-bsl-context - Hexagonal Architecture + DDD + Strategy Pattern

## üéØ –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ò –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ **MCP Tools —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ 5 tools (search, info, getMember, getMembers, getConstructors)
- ‚úÖ **–ü–æ–∏—Å–∫–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ fuzzy + –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è RAG/semantic
- ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã**: MCP Markdown + JSON + Plain Text + –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –∏–Ω–¥–µ–∫—Å—ã –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è
- ‚úÖ **Thread-safety**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Kotlin Coroutines

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- ‚úÖ **Kotlin + Spring Boot 3.5.0**: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- ‚úÖ **Spring AI MCP Server**: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Model Context Protocol
- ‚úÖ **BSL Context dependency**: –ø–∞—Ä—Å–∏–Ω–≥ 1–° —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ bsl-context –º–æ–¥—É–ª—å
- ‚úÖ **Memory efficiency**: –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ **Zero downtime**: –ø–ª–∞–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ **SOLID compliance**: –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å ‚â§ 200 —Å—Ç—Ä–æ–∫, –æ–¥–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- ‚úÖ **Testability**: unit test coverage ‚â• 80%, –ª–µ–≥–∫–æ—Å—Ç—å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **Extensibility**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤/—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–æ–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ **Maintainability**: —á–∏—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤ –ø–æ —Å–ª–æ—è–º

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –û–ü–¶–ò–ò

### –û–ü–¶–ò–Ø A: Hexagonal Architecture + DDD + Strategy Pattern

```mermaid
graph TB
    subgraph "üéØ APPLICATION LAYER"
        direction TB
        MCP[McpSearchController] --> UC[Search Use Cases]
        UC --> FS[FormatterService Registry]
    end
    
    subgraph "üíé DOMAIN LAYER" 
        direction TB
        UC --> PORT_IN[Search Port IN]
        PORT_IN --> DS[Domain Services]
        DS --> PORT_OUT[Repository Port OUT]
        DS --> FORMAT_PORT[Formatter Port OUT]
        
        subgraph "Domain Model"
            API[ApiElement]
            QUERY[SearchQuery] 
            RESULT[SearchResult]
        end
    end
    
    subgraph "‚öôÔ∏è INFRASTRUCTURE LAYER"
        direction TB
        PORT_OUT --> REPO[BSL Repository]
        FORMAT_PORT --> MD[Markdown Formatter]
        FORMAT_PORT --> JSON[JSON Formatter]
        FORMAT_PORT --> TXT[Text Formatter]
        
        subgraph "Search Engines"
            SE1[Fuzzy Engine]
            SE2[Intelligent Engine]
            SE3[RAG Engine - Future]
        end
    end
    
    style MCP fill:#ff6b6b,stroke:#e55555,color:white
    style UC fill:#4ecdc4,stroke:#45b7aa,color:white
    style DS fill:#45b7d1,stroke:#357abd,color:white
    style REPO fill:#96ceb4,stroke:#7bb89f,color:white
    style MD fill:#feca57,stroke:#fd9644,color:white
    style JSON fill:#feca57,stroke:#fd9644,color:white
    style TXT fill:#feca57,stroke:#fd9644,color:white
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤:**
```kotlin
src/main/kotlin/ru/alkoleft/context/
‚îú‚îÄ‚îÄ core/                           # DOMAIN LAYER
‚îÇ   ‚îú‚îÄ‚îÄ domain/                     # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/                    # ApiElement, Method, Property, Type
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search/                 # SearchQuery, SearchResult, SearchOptions
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ platform/               # PlatformContext, Metadata
‚îÇ   ‚îú‚îÄ‚îÄ ports/                      # HEXAGONAL PORTS
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ incoming/               # Use Cases –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ outgoing/               # Repository + Formatter –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ services/                   # –î–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (SearchService, RankingService)
‚îú‚îÄ‚îÄ application/                    # APPLICATION LAYER  
‚îÇ   ‚îú‚îÄ‚îÄ usecases/                   # Use Cases —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ services/                   # FormatterRegistryService
‚îÇ   ‚îî‚îÄ‚îÄ dto/                        # Request/Response DTO
‚îî‚îÄ‚îÄ infrastructure/                 # INFRASTRUCTURE LAYER
    ‚îú‚îÄ‚îÄ adapters/
    ‚îÇ   ‚îú‚îÄ‚îÄ incoming/mcp/           # MCP controllers + tools
    ‚îÇ   ‚îî‚îÄ‚îÄ outgoing/               # Repository + Formatter implementations
    ‚îÇ       ‚îú‚îÄ‚îÄ repositories/       # BSL data access
    ‚îÇ       ‚îú‚îÄ‚îÄ search/             # Search engines (Fuzzy, Intelligent, RAG)
    ‚îÇ       ‚îî‚îÄ‚îÄ formatting/         # Multiple formatters (MD, JSON, TXT)
    ‚îú‚îÄ‚îÄ configuration/              # Spring config
    ‚îî‚îÄ‚îÄ persistence/                # Cache + indexes
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –û–ø—Ü–∏–∏ A:**
- ‚úÖ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: Strategy pattern –¥–ª—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–æ–≤
- ‚úÖ **–ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Å–ª–æ–µ–≤**: –¥–æ–º–µ–Ω –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: –ø–æ—Ä—Ç—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ª–µ–≥–∫–æ –º–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏  
- ‚úÖ **SOLID compliance**: –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç –æ–¥–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- ‚úÖ **Future-ready**: –≥–æ—Ç–æ–≤ –∫ RAG, —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–º—É –ø–æ–∏—Å–∫—É, –Ω–æ–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–∞–º

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –û–ø—Ü–∏–∏ A:**
- ‚ùå **–í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å**: –º–Ω–æ–≥–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π –¥–ª—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π –∑–∞–¥–∞—á–∏
- ‚ùå **Over-engineering —Ä–∏—Å–∫**: –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–º –¥–ª—è —Ç–µ–∫—É—â–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π
- ‚ùå **–í—Ä–µ–º—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è**: —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–ø–∏—Å–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚ùå **–ö—Ä–∏–≤–∞—è –æ–±—É—á–µ–Ω–∏—è**: –Ω–æ–≤—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–∑—É—á–µ–Ω–∏–µ DDD

---

### –û–ü–¶–ò–Ø B: Layered Architecture + Repository Pattern  

```mermaid
graph TB
    subgraph "üéØ PRESENTATION LAYER"
        MCP[McpApiController]
    end
    
    subgraph "‚ö° SERVICE LAYER"
        direction TB
        MCP --> SEARCH[SearchApplicationService]
        MCP --> CONTEXT[ContextApplicationService]
        SEARCH --> FORMAT[FormatterService]
    end
    
    subgraph "üíæ REPOSITORY LAYER" 
        direction TB
        SEARCH --> REPO[ApiRepository]
        SEARCH --> CACHE[CacheRepository]
        CONTEXT --> LOADER[ContextLoader]
    end
    
    subgraph "üîç SEARCH LAYER"
        direction TB
        SEARCH --> ENGINE[SearchEngineManager]
        ENGINE --> FUZZY[FuzzySearchEngine]
        ENGINE --> INTEL[IntelligentSearchEngine]
    end
    
    style MCP fill:#ff6b6b,stroke:#e55555,color:white
    style SEARCH fill:#4ecdc4,stroke:#45b7aa,color:white
    style FORMAT fill:#feca57,stroke:#fd9644,color:white
    style ENGINE fill:#45b7d1,stroke:#357abd,color:white
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤:**
```kotlin
src/main/kotlin/ru/alkoleft/context/
‚îú‚îÄ‚îÄ presentation/                   # MCP controllers
‚îÇ   ‚îî‚îÄ‚îÄ mcp/
‚îú‚îÄ‚îÄ service/                        # Application services
‚îÇ   ‚îú‚îÄ‚îÄ search/
‚îÇ   ‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îî‚îÄ‚îÄ formatting/
‚îú‚îÄ‚îÄ repository/                     # Data access layer
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ cache/
‚îÇ   ‚îî‚îÄ‚îÄ loader/
‚îú‚îÄ‚îÄ search/                         # Search engines layer
‚îÇ   ‚îú‚îÄ‚îÄ engines/
‚îÇ   ‚îî‚îÄ‚îÄ ranking/
‚îú‚îÄ‚îÄ model/                          # Domain models + DTOs
‚îÇ   ‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îî‚îÄ‚îÄ dto/
‚îî‚îÄ‚îÄ config/                         # Configuration
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –û–ø—Ü–∏–∏ B:**
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –ø–æ–Ω–∏–º–∞–Ω–∏—è**: —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞—è layered –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ **–ë—ã—Å—Ç—Ä–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ**: –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
- ‚úÖ **Spring Native**: —Ö–æ—Ä–æ—à–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Spring Boot
- ‚úÖ **–ó–Ω–∞–∫–æ–º–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥–µ**: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –≤ Spring –ø—Ä–æ–µ–∫—Ç–∞—Ö

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –û–ø—Ü–∏–∏ B:**
- ‚ùå **–ú–µ–Ω—å—à–∞—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: —Å–ª–æ–∏ –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚ùå **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- ‚ùå **Testing complexity**: —Å–ª–æ–∂–Ω–æ—Å—Ç—å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É —Å–ª–æ—è–º–∏
- ‚ùå **Mixing concerns**: –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –º–æ–∂–µ—Ç —Å–º–µ—à–∏–≤–∞—Ç—å—Å—è —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –¥–µ—Ç–∞–ª—è–º–∏

---

### –û–ü–¶–ò–Ø C: Modular Monolith + Package by Feature

```mermaid
graph TB
    subgraph "üîç SEARCH MODULE"
        direction TB
        SEARCH_API[Search API]
        SEARCH_SVC[Search Service]
        SEARCH_REPO[Search Repository]
        SEARCH_API --> SEARCH_SVC --> SEARCH_REPO
    end
    
    subgraph "üìã CONTEXT MODULE"
        direction TB  
        CONTEXT_API[Context API]
        CONTEXT_SVC[Context Service]
        CONTEXT_LOADER[Context Loader]
        CONTEXT_API --> CONTEXT_SVC --> CONTEXT_LOADER
    end
    
    subgraph "üìù FORMATTING MODULE"
        direction TB
        FORMAT_API[Formatter API]
        FORMAT_REGISTRY[Formatter Registry]
        FORMAT_IMPL[Format Implementations]
        FORMAT_API --> FORMAT_REGISTRY --> FORMAT_IMPL
    end
    
    subgraph "üéØ MCP MODULE"
        direction TB
        MCP_TOOLS[MCP Tools]
        MCP_CONTROLLER[MCP Controller]
        MCP_TOOLS --> MCP_CONTROLLER
    end
    
    MCP_TOOLS --> SEARCH_API
    MCP_TOOLS --> CONTEXT_API  
    MCP_TOOLS --> FORMAT_API
    
    style SEARCH_API fill:#4ecdc4,stroke:#45b7aa,color:white
    style CONTEXT_API fill:#ff6b6b,stroke:#e55555,color:white
    style FORMAT_API fill:#feca57,stroke:#fd9644,color:white
    style MCP_TOOLS fill:#45b7d1,stroke:#357abd,color:white
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤:**
```kotlin
src/main/kotlin/ru/alkoleft/context/
‚îú‚îÄ‚îÄ search/                         # Search feature module
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îú‚îÄ‚îÄ repository/
‚îÇ   ‚îî‚îÄ‚îÄ model/
‚îú‚îÄ‚îÄ context/                        # Context feature module
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îú‚îÄ‚îÄ loader/
‚îÇ   ‚îî‚îÄ‚îÄ model/
‚îú‚îÄ‚îÄ formatting/                     # Formatting feature module
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ registry/
‚îÇ   ‚îú‚îÄ‚îÄ impl/
‚îÇ   ‚îî‚îÄ‚îÄ model/
‚îú‚îÄ‚îÄ mcp/                           # MCP integration module
‚îÇ   ‚îú‚îÄ‚îÄ tools/
‚îÇ   ‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îî‚îÄ‚îÄ dto/
‚îî‚îÄ‚îÄ shared/                        # Shared utilities
    ‚îú‚îÄ‚îÄ config/
    ‚îú‚îÄ‚îÄ cache/
    ‚îî‚îÄ‚îÄ common/
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –û–ø—Ü–∏–∏ C:**
- ‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ñ–∏—á–∞–º
- ‚úÖ **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–æ–¥—É–ª–µ–π**: –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –º–æ–∂–µ—Ç —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏**: –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å —Ñ–∏—á–µ–π –≤ –æ–¥–Ω–æ–º –ø–∞–∫–µ—Ç–µ
- ‚úÖ **Team scalability**: —Ä–∞–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ —Ä–∞–∑–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –û–ø—Ü–∏–∏ C:**
- ‚ùå **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ
- ‚ùå **Cross-cutting concerns**: —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∫–≤–æ–∑–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚ùå **API complexity**: –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
- ‚ùå **Dependency management**: —Ä–∏—Å–∫ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

---

### –û–ü–¶–ò–Ø D: Micro-Kernel Architecture + Plugin System

```mermaid
graph TB
    subgraph "üéØ CORE KERNEL"
        direction TB
        KERNEL[MCP Kernel]
        REGISTRY[Plugin Registry]
        API[Plugin API]
        KERNEL --> REGISTRY --> API
    end
    
    subgraph "üîç SEARCH PLUGINS"
        direction TB
        FUZZY_P[Fuzzy Search Plugin]
        INTEL_P[Intelligent Search Plugin]
        RAG_P[RAG Search Plugin - Future]
    end
    
    subgraph "üìù FORMATTER PLUGINS"
        direction TB
        MD_P[Markdown Plugin]
        JSON_P[JSON Plugin]
        TXT_P[Text Plugin]
    end
    
    subgraph "üíæ DATA PLUGINS"
        direction TB
        BSL_P[BSL Context Plugin]
        CACHE_P[Cache Plugin]
    end
    
    API --> FUZZY_P
    API --> INTEL_P
    API --> RAG_P
    API --> MD_P
    API --> JSON_P
    API --> TXT_P
    API --> BSL_P
    API --> CACHE_P
    
    style KERNEL fill:#ff6b6b,stroke:#e55555,color:white
    style REGISTRY fill:#4ecdc4,stroke:#45b7aa,color:white
    style FUZZY_P fill:#45b7d1,stroke:#357abd,color:white
    style MD_P fill:#feca57,stroke:#fd9644,color:white
    style BSL_P fill:#96ceb4,stroke:#7bb89f,color:white
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –û–ø—Ü–∏–∏ D:**
- ‚úÖ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å**: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤
- ‚úÖ **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –ø–ª–∞–≥–∏–Ω—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**: –Ω–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω = –Ω–æ–≤—ã–π JAR —Ñ–∞–π–ª
- ‚úÖ **Runtime configuration**: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –±–µ–∑ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –û–ø—Ü–∏–∏ D:**
- ‚ùå **–ò–∑–±—ã—Ç–æ—á–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å**: —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚ùå **Performance overhead**: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–º–µ–¥–ª—è–µ—Ç —Ä–∞–±–æ—Ç—É
- ‚ùå **Deployment complexity**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º JAR —Ñ–∞–π–ª–æ–≤
- ‚ùå **Type safety loss**: –ø–æ—Ç–µ—Ä—è compile-time –ø—Ä–æ–≤–µ—Ä–æ–∫

---

## ‚öñÔ∏è –ê–ù–ê–õ–ò–ó –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### –û—Ü–µ–Ω–∫–∞ –æ–ø—Ü–∏–π –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º:

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û–ø—Ü–∏—è A (Hexagonal) | –û–ø—Ü–∏—è B (Layered) | –û–ø—Ü–∏—è C (Modular) | –û–ø—Ü–∏—è D (Micro-Kernel) |
|----------|---------------------|-------------------|-------------------|------------------------|
| **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è** | ‚ùå –°–ª–æ–∂–Ω–æ | ‚úÖ –õ–µ–≥–∫–æ | üü° –°—Ä–µ–¥–Ω–µ | ‚ùå –û—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ |
| **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | üü° –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ | ‚úÖ –•–æ—Ä–æ—à–æ | ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | ‚úÖ –û—Ç–ª–∏—á–Ω–æ | üü° –°—Ä–µ–¥–Ω–µ | ‚úÖ –•–æ—Ä–æ—à–æ | üü° –°—Ä–µ–¥–Ω–µ |
| **SOLID —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ** | ‚úÖ –ü–æ–ª–Ω–æ–µ | üü° –ß–∞—Å—Ç–∏—á–Ω–æ–µ | ‚úÖ –•–æ—Ä–æ—à–µ–µ | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ –í—ã—Å–æ–∫–∞—è | ‚úÖ –í—ã—Å–æ–∫–∞—è | ‚úÖ –í—ã—Å–æ–∫–∞—è | üü° –°—Ä–µ–¥–Ω—è—è |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏—è** | ‚ùå –í—ã—Å–æ–∫–∞—è | ‚úÖ –ù–∏–∑–∫–∞—è | üü° –°—Ä–µ–¥–Ω—è—è | ‚ùå –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è |
| **Future-ready** | ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ | üü° –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ | ‚úÖ –•–æ—Ä–æ—à–æ | ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ |

### üèÜ –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–ê–Ø –û–ü–¶–ò–Ø: **Hexagonal Architecture + DDD + Strategy Pattern (–û–ø—Ü–∏—è A)**

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞:**

1. **‚úÖ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞**: –ü—Ä–æ–µ–∫—Ç —Ä–∞—Å—Ç–µ—Ç, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è RAG –∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
2. **‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**: –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ SOLID, –ª–µ–≥–∫–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. **‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: Strategy Pattern –ø–æ–∑–≤–æ–ª–∏—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º—ã/—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞
4. **‚úÖ –ò–∑–æ–ª—è—Ü–∏—è**: –î–æ–º–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
5. **‚úÖ Team growth**: –ü—Ä–∏ —Ä–æ—Å—Ç–µ –∫–æ–º–∞–Ω–¥—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–ª–µ–≥—á–∏—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

**–ö–æ–º–ø—Ä–æ–º–∏—Å—Å—ã:**
- –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç—Å—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–º–∏ –≤—ã–≥–æ–¥–∞–º–∏
- –ö—Ä–∏–≤–∞—è –æ–±—É—á–µ–Ω–∏—è –æ–∫—É–ø–∞–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ–º –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- –í—Ä–µ–º—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –º–æ–∂–Ω–æ –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—ç—Ç–∞–ø–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–µ–π

---

## üìù IMPLEMENTATION GUIDELINES

### –§–∞–∑–∞ 1: Foundation (Week 1-2)
```kotlin
// 1. –°–æ–∑–¥–∞—Ç—å –¥–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
core/domain/api/ApiElement.kt
core/domain/search/SearchQuery.kt
core/domain/search/SearchResult.kt

// 2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ—Ä—Ç—ã
core/ports/incoming/SearchUseCase.kt  
core/ports/outgoing/ApiRepository.kt
core/ports/outgoing/ResultFormatter.kt

// 3. –î–æ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
core/services/SearchService.kt
core/services/RankingService.kt
```

### –§–∞–∑–∞ 2: Application Layer (Week 2-3)
```kotlin
// 1. Use Cases —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
application/usecases/search/SearchApiUseCaseImpl.kt
application/usecases/context/LoadContextUseCaseImpl.kt

// 2. Application Services
application/services/FormatterRegistryService.kt
application/services/SearchApplicationService.kt

// 3. DTO –¥–ª—è —Å–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
application/dto/SearchRequestDto.kt
application/dto/SearchResponseDto.kt
```

### –§–∞–∑–∞ 3: Infrastructure Adapters (Week 3-4)
```kotlin
// 1. MCP –∞–¥–∞–ø—Ç–µ—Ä—ã
infrastructure/adapters/incoming/mcp/McpSearchController.kt
infrastructure/adapters/incoming/mcp/McpToolsRegistry.kt

// 2. Repository –∞–¥–∞–ø—Ç–µ—Ä—ã  
infrastructure/adapters/outgoing/repositories/BslContextRepository.kt
infrastructure/adapters/outgoing/repositories/CachedApiRepository.kt

// 3. Search engines
infrastructure/adapters/outgoing/search/FuzzySearchEngine.kt
infrastructure/adapters/outgoing/search/CompositeSearchEngine.kt

// 4. Formatters
infrastructure/adapters/outgoing/formatting/McpMarkdownFormatter.kt
infrastructure/adapters/outgoing/formatting/JsonFormatter.kt
infrastructure/adapters/outgoing/formatting/PlainTextFormatter.kt
```

### –§–∞–∑–∞ 4: Configuration & Integration (Week 4)
```kotlin
// 1. Spring –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
infrastructure/configuration/ApplicationConfig.kt
infrastructure/configuration/SearchConfig.kt
infrastructure/configuration/FormatterConfig.kt

// 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
// 3. –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
// 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
```

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:
- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ MCP tools —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —É—Ö—É–¥—à–∏–ª–∞—Å—å
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ ‚â• 80%
- ‚úÖ –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∑–∞ < 30 –º–∏–Ω—É—Ç
- ‚úÖ –ù–æ–≤—ã–π –ø–æ–∏—Å–∫–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∑–∞ < 2 —á–∞—Å–∞

---

## ‚úÖ VERIFICATION CHECKPOINT

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ **SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã**: –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –∏–º–µ–µ—Ç –æ–¥–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, ‚â§ 200 —Å—Ç—Ä–æ–∫
- ‚úÖ **Hexagonal ports**: –¥–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ **Strategy Pattern**: —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä—ã –∏ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã
- ‚úÖ **DDD –º–æ–¥–µ–ª—å**: —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ **Spring DI**: –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ **MCP Tools compatibility**: —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ 5 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö tools
- ‚úÖ **Multiple formatters**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Markdown, JSON, Plain Text
- ‚úÖ **Search algorithms**: —Ç–µ–∫—É—â–∏–π fuzzy + –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ RAG/semantic
- ‚úÖ **Performance**: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω–¥–µ–∫—Å—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ **Thread-safety**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Kotlin Coroutines

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ **Extensibility**: –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
- ‚úÖ **Testability**: –ª–µ–≥–∫–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è unit –∏ integration —Ç–µ—Å—Ç–æ–≤
- ‚úÖ **Maintainability**: –ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º —Å–ª–æ—è–º
- ‚úÖ **Documentation**: comprehensive KDoc –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö API

# üé®üé®üé® EXITING CREATIVE PHASE

**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø**: IMPLEMENT - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π Hexagonal Architecture —Å–æ–≥–ª–∞—Å–Ω–æ guidelines
**–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**: –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π creative –¥–æ–∫—É–º–µ–Ω—Ç, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –¥–∏–∑–∞–π–Ω –∑–∞–≤–µ—Ä—à–µ–Ω, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∞